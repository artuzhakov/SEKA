# ๐ ะััะธัะตะบัััะฐ SEKA

SEKA โ ััะพ ะผะฝะพะณะพะฟะพะปัะทะพะฒะฐัะตะปััะบะฐั ะบะฐััะพัะฝะฐั ะธะณัะฐ ั real-time ะพะฑะฝะพะฒะปะตะฝะธะตะผ, ัััะพะณะพะน ะดะพะผะตะฝะฝะพะน ะปะพะณะธะบะพะน ะธ ัััะบะธะผ ัะฐะทะดะตะปะตะฝะธะตะผ ะพัะฒะตัััะฒะตะฝะฝะพััะธ ะผะตะถะดั ัะปะพัะผะธ.

ะะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั **ัะฐะบัะธัะตัะบัั ะฐััะธัะตะบัััั**, ะพััะฐะถัะฝะฝัั ะฒ ะบะพะดะต ัะตะฟะพะทะธัะพัะธั.

---

# 1. ๐ฏ ะััะธัะตะบัััะฝัะต ะฟัะธะฝัะธะฟั

- **Backend-first** โ ะฒัั ะปะพะณะธะบะฐ ะธะณัั ะฒัะฟะพะปะฝัะตััั ะฝะฐ ัะตัะฒะตัะต  
- **Zero-trust frontend** โ ะบะปะธะตะฝั ะปะธัั ะพัะพะฑัะฐะถะฐะตั ะดะฐะฝะฝัะต  
- **Event-driven** โ ะธะณัะฐ ะพะฑะฝะพะฒะปัะตััั ัะตัะตะท WebSocket  
- **DDD** โ ะดะพะผะตะฝะฝะฐั ะผะพะดะตะปั ะฒ ะพัะดะตะปัะฝะพะผ ัะปะพะต  
- **ะขะพะฝะบะธะน ะบะปะธะตะฝั** โ Vue ะพัะฒะตัะฐะตั ัะพะปัะบะพ ะทะฐ UI  
- **API-ะบะพะฝััะฐะบั ะฝะตะธะทะผะตะฝัะตะผ** โ ััะพะฝั ัะฐะฑะพัะฐะตั ัััะพะณะพ ัะตัะตะท ัะฝะดะฟะพะธะฝัั  

---

# 2. ๐ฅ Backend (Laravel)

## ๐ 2.1. ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

app/
โโโ Application/
โ โโโ Services/
โ โ โโโ BiddingService.php
โ โ โโโ DistributionService.php
โ โ โโโ GameService.php
โ โ โโโ QuarrelService.php
โ โ โโโ ReadinessService.php
โ โ โโโ ScoringService.php
โ โโโ DTO/
โ โโโ Interfaces/
โ
โโโ Domain/
โ โโโ Game/
โ โ โโโ Entities/ (Game, Player, Bet, Round, Turn)
โ โ โโโ Enums/ (GameStatus, PlayerStatus, PlayerAction, CombinationType)
โ โ โโโ Events/
โ โ โโโ Rules/
โ โ โโโ Collections/
โ โ โโโ ValueObjects/
โ โโโ Cards/
โ โ โโโ Card.php
โ โ โโโ Deck.php
โ โ โโโ Enums/
โ โโโ Repositories/
โ โโโ CachedGameRepository.php
โ โโโ InMemoryGameRepository.php
โ โโโ TestGameRepository.php
โ
โโโ Http/
โ โโโ Controllers/
โ โโโ Requests/
โ โโโ Resources/
โ
โโโ Events/
โโโ Listeners/

---

# 3. ๐ง Application Services โ ะะพะณะธะบะฐ ะธะณัั

| ะกะตัะฒะธั | ะะพะปั |
|--------|------|
| **GameService** | ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปะฝัะผ ะธะณัะพะฒัะผ ัะธะบะปะพะผ |
| **DistributionService** | ะะพะปะพะดะฐ, ัะฐะทะดะฐัะฐ, ะฟะตัะตะผะตัะธะฒะฐะฝะธะต |
| **BiddingService** | ะะพะณะธะบะฐ ััะฐะฒะพะบ, ัะฐัะฝะดั, ััะผะฝะฐั ะธะณัะฐ |
| **ScoringService** | ะะพะดัััั ะพัะบะพะฒ ะธ ะบะพะผะฑะธะฝะฐัะธะน |
| **QuarrelService** | ะะตัะฐะฝะธะบะฐ ยซะกะฒะฐััยป |
| **ReadinessService** | ะกะธััะตะผะฐ ะณะพัะพะฒะฝะพััะธ ะฟะตัะตะด ะธะณัะพะน |

---

# 4. ๐ Domain Layer

ะะดะตัั ััะฐะฝะธััั ะฝะฐััะพััะฐั ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ:

- `Game` โ ะพัะฝะพะฒะฝะฐั ัััะฝะพััั ะธะณัั  
- `Player` โ ัะพััะพัะฝะธะต ะธะณัะพะบะฐ  
- `Round`, `Turn` โ ัะตะบััะตะต ัะพััะพัะฝะธะต ัะฐัะฝะดะพะฒ  
- `Card`, `Deck` โ ะดะพะผะตะฝะฝะฐั ะผะพะดะตะปั ะบะฐััั  

ะญัะพั ัะปะพะน ะฝะต ะทะฝะฐะตั ะพะฑ API, UI, ะฑะฐะทะต ะดะฐะฝะฝัั.

---

# 5. ๐ Repository Layer

## ะะตะฐะปัะฝัะต ัะตะฐะปะธะทะฐัะธะธ ะฒ ะฟัะพะตะบัะต:

### **โ CachedGameRepository**
ะัะฟะพะปัะทัะตั Laravel Cache ะดะปั ััะฐะฝะตะฝะธั ะธะณั.

### **โ InMemoryGameRepository**
ะัะฟะพะปัะทัะตััั ะฒ ัะฐััะธ ัะตััะพะฒ.

### **โ TestGameRepository**
ะัะพะฑัะต ััะตะฝะฐัะธะธ ัะตััะธัะพะฒะฐะฝะธั.

---

# 6. ๐จ Frontend (Vue 3 + Inertia.js)

resources/js/
โโโ Pages/
โ โโโ SekaGame.vue
โ โโโ Lobby.vue
โ โโโ Dashboard.vue
โ โโโ Profile.vue
โ
โโโ components/seka/
โ โโโ SekaGame.vue
โ โโโ components/
โ โ โโโ GameTable.vue
โ โ โโโ PlayerArea.vue
โ โ โโโ PlayerHand.vue
โ โ โโโ ActionPanel.vue
โ โ โโโ BettingInterface.vue
โ โ โโโ MonitoringPanel.vue
โโโ composables/
โโโ useGameState.js
โโโ useGameActions.js
โโโ useWebSocket.js
โโโ useGameLogic.js
โโโ useGameMonitoring.js

---

# 7. ๐ Data Flow (Backend โ Frontend)

## 1) ะะณัะพะบ ะดะตะปะฐะตั ะดะตะนััะฒะธะต  
โ `POST /api/seka/games/{id}/action`

## 2) Backend ะพะฑะฝะพะฒะปัะตั ัะพััะพัะฝะธะต  
โ ะฒัะทัะฒะฐะตั ะฝัะถะฝัะน ัะตัะฒะธั

## 3) Backend ะฟัะฑะปะธะบัะตั ัะพะฑััะธะต  
โ WebSocket โ `game_state_updated`

## 4) Front ะพะฑะฝะพะฒะปัะตั UI  
โ `useGameState` ะฟะพะปััะฐะตั ะฝะพะฒัะน snapshot

---

# 8. ๐ก WebSocket Layer

ะัะฟะพะปัะทััััั ัะพะฑััะธั:

- `GameStateUpdated`
- `PlayerActionTaken`
- `CardsDistributed`
- `TurnChanged`
- `QuarrelStarted`
- `GameFinished`

ะะพะดัะพะฑะฝะตะต โ ะฒ `docs/REALTIME.md`.

---

# 9. ๐ฆ ะัะพะณ

ะััะธัะตะบัััะฐ SEKA โ ััะพ ะผะพะดัะปัะฝะฐั, ะปะตะณะบะพ ัะฐััะธััะตะผะฐั ััััะบัััะฐ ั ัััะบะธะผ ัะฐะทะดะตะปะตะฝะธะตะผ ะดะพะผะตะฝะฐ, ัะตัะฒะธัะพะฒ, UI ะธ real-time ะฒะทะฐะธะผะพะดะตะนััะฒะธะตะผ.
