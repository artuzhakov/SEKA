# SEKA — Система карт и комбинаций (CARD_SYSTEM.md)

SEKA использует укороченную колоду:

- ранги: 10, J, Q, K, A
- масти: ♥ ♦ ♣ ♠
- плюс специальный джокер: `6♣`

Всего: **21 карта**.

---

## 1. Общие правила

- Комбинация состоит из 3 карт (основной режим) или 2 карт (упрощённые случаи, например, при сводке).
- Джокер (`6♣`) может принимать значение любой карты от 10 до A любой масти.
- Подсчёт очков — строго по таблице комбинаций, с приоритетами.

---

## 2. Приоритеты комбинаций (3 карты)

### 2.1 Специальные комбинации (приоритет 1)

- Три туза — 37 очков  
  - AAA или AA + джокер
- Три короля — 36
- Три дамы — 35
- Три вальта — 34
- Три десятки — 33
- Два туза — 22  
  - AA или A + джокер

### 2.2 Комбинации по мастям (приоритет 2)

- Джокер + туз + карта той же масти — 32
- Три одной масти + туз — 31
- Три одной масти (без туза/джокера) — 30

### 2.3 Базовые комбинации (приоритет 3)

- Две масти + туз (туз в паре) — 21
- Две масти (без туза/джокера) — 20
- Три разные масти + туз — 11
- Три разные масти — 10

---

## 3. Комбинации для 2 карт (упрощённо)

- Два туза — 22
- Туз + Джокер — 22
- Две одинаковые масти + Туз — 21
- Джокер + карта — 21
- Две одинаковые масти — 20

---

## 4. Джокер (6♣)

Алгоритм:

1. Считаем значение комбинации без джокера для каждой возможной замены (10–A, любая масть).
2. Выбираем замену, дающую максимальное количество очков.
3. Фиксируем комбинацию и очки.

Реализация — на бэкенде в `ScoringService`.

---

## 5. API подсчёта очков

Пример публичного эндпоинта:

```http
POST /api/public/seka/calculate-points
{
  "cards": ["10♥", "J♦", "Q♣"],
  "card_count": 3
}
```

Ответ:

```json
{
  "success": true,
  "points": 25,
  "combination": "Стрит / пример"
}
```

Конкретные названия комбинаций и их строковые представления можно доопределить в `ScoringService`.
